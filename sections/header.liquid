
{%liquid
   assign menu = section.settings.menu
   assign header_menu_links = linklists[menu].links

 %}



<header
  style="background-color:{{ settings.background_1 }}"
>
  <div class="header_wrapper">      
    <div class="site_logo">
      {% unless settings.site_logo %}
         <h2 class="header__title">
      {{ shop.name | link_to: routes.root_url }}
    </h2>
      {% endunless %}
      <a>
         <img class="site_logo" width="" height=""
          style="width:{{ section.settings.logo_width }}px;"
          src="{{ settings.site_logo | image_url }}" />
        </a>
    </div>
   

    <div style="justify-content:{{ section.settings.menu_position }};" class="header__menu">
      {% if section.settings.menu_type == 'menu' %}
        <ul class="d_header_menu">
         
         {% for link in header_menu_links %}
            <li class=""> 
              <a href="{{ link.url }}"> {{  link.title }} </a>
              {% if link.links.size > 0 %}
                <ul class="child">
                  {% for child_link in link.links %}
                    <li>
                        <a href="{{  child_link.url }}" class="">{{ child_link.title }}</a>  
                        {% if child_link.links.size > 0 %}
                          <ul class="grandchild">
                          {% for grandChild in child_link.links %}
                            <li>
                              <a href="{{ grandChild.url }}" class="">{{ grandChild.title }}</a>  
                            </li>
                          {% endfor %}
                        </ul>
                         <img src="https://cdn.shopify.com/s/files/1/0732/4434/4472/files/right-arrow.png?v=1760706496" 
                           width="10" height="10">
                        {% endif %}
                        
                    </li>
                  {% endfor %}
                </ul>
              {% endif %}
            </li> 
         
          {% endfor %}
        </ul>

      {% else %}
        Mega menu
      {% endif %}
    
    </div>

    <div class="header__icons">
      {% if shop.customer_accounts_enabled %}
        {{ 'icon-account.svg' | inline_asset_content | link_to: routes.account_url }}
      {% endif %}

      <a href="{{ routes.cart_url }}">
        {% if cart.item_count > 0 %}
          <sup>{{ cart.item_count }}</sup>
        {% endif %}

        {{ 'icon-cart.svg' | inline_asset_content }}
      </a>
    </div>
  </div>
</header>

{% stylesheet %}
  header {    
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .header_wrapper{
    max-width: 1240px;
    width: 100%;
    padding:0 20px;
    margin:0 auto;
    display: grid;
    grid-template-columns: 1fr 4fr 1fr;
  }

  .header_wrapper .site_logo{
    height: auto;
  }

  .header_wrapper ul {
    list-style: none;
  }

  ul.d_header_menu{
    display: flex;
    list-style: none;
    gap:20px;
    position: relative;
  }

  ul.d_header_menu li{
    position: relative;
  }

  /* child */
  ul.d_header_menu li ul{  
    position: absolute;    
    left:0;
    bottom: -100%;
    background-color: var(--background-1);
    z-index: 99;
    height: 100%;
    min-width: 150px;
    border-top:0px solid #fff;
   
  }

  ul.d_header_menu li ul li{
     background-color: var(--background-1);
     position: relative;
     border-bottom: 1px solid white;
     z-index: 99;
  }

  ul.d_header_menu li ul li a{
    cursor: pointer;
    padding: 10px;
    display: inline-block;
  }

  /* grandchild ul */
  ul.d_header_menu li ul li ul {
     background-color: red;
     position: absolute;
     left:100%;
     top:0;
     z-index: 1;
     display: block;
     box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
  }

  ul.d_header_menu li ul li ul li {
     background-color: var(--background-1);
  }

  header a {
    position: relative;
    text-decoration: none;
    color: #fff;
  }
  header a sup {
    position: absolute;
    left: 100%;
    overflow: hidden;
    max-width: var(--page-margin);
  }
  header svg {
    width: 2rem;
  }
  header .header__menu{
    display: flex;
    align-items: center;
    color:#fff;
  }
  header .header__menu,
  header .header__icons {
    display: flex;
    gap: 1rem;
    align-items: center;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "header",
  "settings": [
    {
      "type": "range",
      "default":100,
      "min": 100,
      "max": 200,
      "step": 2,
      "label": "Logo Widht",
      "id": "logo_width"
    },
    {
      "type": "select",
      "id": "menu_type",
      "label": "Menu type",
      "options": [
        { "label": "Menu", "value": "menu" },
        { "label": "Mega menu", "value": "mega" }
      ]
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "t:labels.menu",
      "visible_if": "{{ section.settings.menu_type == 'menu' }}"
    },
    {
      "type": "header",
      "content": "Mega menu has to build by adding blocks",
      "visible_if": "{{ section.settings.menu_type == 'mega' }}"
    },
    {
      "type": "select",
      "label": "Menu position",
      "id": "menu_position",
      "options": [
        {
          "label": "Left",
          "value": "flex-start"
        },
        {
          "label": "Center",
          "value": "center"
        },
        {
          "label": "Right",
          "value": "flex-end"
        }
      ],
      "default":"center"
    }
  ]
}
{% endschema %}
